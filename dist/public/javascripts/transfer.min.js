document.querySelector("#btnSend").addEventListener("click",()=>{let e=document.querySelector("#receiver").value,t=document.querySelector("#coins").value,o=document.querySelector("#reason").value,r=document.querySelector("#message").value,n=new Date;""!=e&&t&&!isNaN(t)&&""!=o&&userCoins-t>=0?fetch(base_url+"/api/v1/transfers/",{method:"post",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},body:JSON.stringify({transfer:{sender:userUserName,receiver:e,coins:parseFloat(t),reason:o,message:r,date:n}})}).then(e=>e.json()).then(e=>{if("success"===e.status){let o=e;fetch(base_url+"/users/coinsTransfered/"+userUserName,{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},body:JSON.stringify({coins:-t})}).then(e=>e.json()).then(e=>{"success"===e.status&&(primus.write({action:"updateTransfer",data:o}),document.querySelector(".info").classList.add("green"),document.querySelector(".info").classList.remove("red"),document.querySelector(".info--text").innerHTML="The coins has been transfered successfully."),console.log(e)}).catch(e=>{console.log(e)})}else document.querySelector(".info").classList.remove("green"),document.querySelector(".info").classList.add("red"),document.querySelector(".info--text").innerHTML=e.message.message;document.querySelector("#receiver").value="",document.querySelector("#coins").value="",document.querySelector("#reason").value="",document.querySelector("#message").value=""}).catch(e=>{console.log(e)}):(t&&!isNaN(t)||(document.querySelector(".info").classList.remove("green"),document.querySelector(".info").classList.add("red"),document.querySelector(".info--text").innerHTML="You must write a number"),userCoins-t<0&&(document.querySelector(".info").classList.remove("green"),document.querySelector(".info").classList.add("red"),document.querySelector(".info--text").innerHTML="Your balance is to low"),""==o&&(document.querySelector(".info").classList.remove("green"),document.querySelector(".info").classList.add("red"),document.querySelector(".info--text").innerHTML="You must fill a reason"),""==e&&(document.querySelector(".info").classList.remove("green"),document.querySelector(".info").classList.add("red"),document.querySelector(".info--text").innerHTML="You must give an email"))});